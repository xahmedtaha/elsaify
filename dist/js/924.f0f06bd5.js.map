{"version":3,"file":"js/924.f0f06bd5.js","mappings":"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","sources":["webpack://elsaify/./src/views/LecturePage.vue","webpack://elsaify/./src/views/LecturePage.vue?b273"],"sourcesContent":["<template>\r\n    <ion-page>\r\n        <ion-header>\r\n            <ion-toolbar>\r\n                <ion-buttons slot=\"start\">\r\n                    <ion-back-button :icon=\"arrowForward\" default-href=\"/\"></ion-back-button>\r\n                </ion-buttons>\r\n                <ion-title>{{ this.$route.query.title }}</ion-title>\r\n            </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content>\r\n            <main>\r\n                <transition name=\"fade\" mode=\"out-in\">\r\n                    <div class=\"wrapper\" v-if=\"loading\">\r\n                        <ion-spinner color=\"primary\" name=\"crescent\"></ion-spinner>\r\n                    </div>\r\n                    <div v-else-if=\"!error\" class=\"courses-wrapper\">\r\n                        <ion-card\r\n                            v-for=\"video in data\"\r\n                            :key=\"video.id\"\r\n                            @click=\"\r\n                                openLecture(video)\r\n                            \"\r\n                            button\r\n                        >\r\n                            <ion-item detail lines=\"none\" :detail-icon=\"playCircle\" class=\"course\">\r\n                                <ion-avatar slot=\"start\">\r\n                                    <ion-img\r\n                                        :src=\"'https://elsaify.elameed.education/elsefy/' + video.img\"\r\n                                    />\r\n                                </ion-avatar>\r\n                                <ion-label>{{ video.title }}</ion-label>\r\n                            </ion-item>\r\n                        </ion-card>\r\n                    </div>\r\n                    <div class=\"error-wrapper\" v-else>\r\n                        <ion-fab-button\r\n                            color=\"danger\"\r\n                            size=\"small\"\r\n                            style=\"margin-top: 20px; --box-shadow: none\"\r\n                            @click=\"getData\"\r\n                        >\r\n                            <ion-icon :icon=\"refresh\" />\r\n                        </ion-fab-button>\r\n                        <ion-text color=\"danger\">ممكن تكون فاصل نت أو السيرفر مش متاح</ion-text>\r\n                        <!-- <ion-text color=\"primary\">(اتأكد انك مشترك في المحاضرة)</ion-text>\r\n\r\n                        <ion-button\r\n                            @click=\"useQR\"\r\n                            style=\"margin-top: 15px\"\r\n                            size=\"small\"\r\n                        >استعمل ال QR</ion-button>-->\r\n                    </div>\r\n                </transition>\r\n            </main>\r\n        </ion-content>\r\n    </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    modalController,\r\n    actionSheetController,\r\n    IonPage,\r\n    IonHeader,\r\n    IonToolbar,\r\n    IonTitle,\r\n    IonContent,\r\n    IonButtons,\r\n    IonBackButton,\r\n    IonLabel,\r\n    IonItem,\r\n    IonAvatar,\r\n    IonImg,\r\n    IonSpinner,\r\n    IonCard,\r\n    IonText,\r\n    // IonButton,\r\n    alertController,\r\n    loadingController,\r\n    IonIcon,\r\n    IonFabButton,\r\n} from \"@ionic/vue\";\r\nimport {\r\n    playCircle,\r\n    arrowForward,\r\n    laptopOutline,\r\n    logoYoutube,\r\n    refresh,\r\n} from \"ionicons/icons\";\r\nimport axios from \"axios\";\r\nimport CryptoJS from \"crypto-js\";\r\nimport VideoModal from \"../components/VideoModal.vue\";\r\nimport { useAuth } from '../stores/auth';\r\n\r\nexport default {\r\n    data: () => ({\r\n        loading: true,\r\n        data: [],\r\n        error: false,\r\n        playCircle,\r\n        arrowForward,\r\n        refresh,\r\n    }),\r\n    components: {\r\n        IonPage,\r\n        IonContent,\r\n        IonHeader,\r\n        IonToolbar,\r\n        IonTitle,\r\n        IonButtons,\r\n        IonBackButton,\r\n        IonLabel,\r\n        IonItem,\r\n        IonAvatar,\r\n        IonImg,\r\n        IonSpinner,\r\n        IonCard,\r\n        // IonButton,\r\n        IonText,\r\n        IonFabButton,\r\n        IonIcon,\r\n    },\r\n    mounted() {\r\n        this.getData();\r\n    },\r\n    watch: {\r\n        '$route.params': {\r\n            handler: function (route) {\r\n                console.log(route)\r\n                this.getData()\r\n            },\r\n            deep: true,\r\n            immediate: true\r\n        }\r\n    },\r\n    methods: {\r\n        async useQR() {\r\n            const alert = await alertController.create({\r\n                header: \"QR\",\r\n                message: 'اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا',\r\n                inputs: [\r\n                    {\r\n                        name: 'code',\r\n                        placeholder: 'كود الكيو ار',\r\n                        type: 'text',\r\n                    },\r\n                ],\r\n                buttons: [\r\n                    { text: \"الغاء\", role: \"cancel\", cssClass: 'secondary', },\r\n                    {\r\n                        text: \"تأكيد\",\r\n                        handler: async (data) => {\r\n                            const loading = await loadingController\r\n                                .create({\r\n                                    message: 'استنى نفعل الكود',\r\n                                });\r\n                            await loading.present();\r\n                            const uninterceptedAxios = axios.create({\r\n                                headers: {\r\n                                    \"Authentication\": \"Bearer \" + useAuth().token,\r\n                                },\r\n                            });\r\n                            uninterceptedAxios\r\n                                .get(\r\n                                    \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId=\" +\r\n                                    this.$route.query.id +\r\n                                    \"&code=\" + data.code,\r\n                                    { crossdomain: true }\r\n                                )\r\n                                .then((res) => {\r\n                                    if (res.data.code == 200) this.getData();\r\n                                    else alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                                        alert.present();\r\n                                        alert.onDidDismiss().then(() => {\r\n                                            this.useQR();\r\n                                        })\r\n                                    });\r\n                                    loading.dismiss()\r\n                                })\r\n                                .catch((err) => {\r\n                                    console.error(err);\r\n                                    alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                                        alert.present();\r\n                                        alert.onDidDismiss().then(() => {\r\n                                            this.useQR();\r\n                                        })\r\n                                    });\r\n                                    loading.dismiss()\r\n                                });\r\n                        },\r\n                    }\r\n                ],\r\n                mode: \"ios\",\r\n            });\r\n            await alert.present();\r\n\r\n            const { role } = await alert.onDidDismiss();\r\n            console.log(\"onDidDismiss resolved with role\", role);\r\n        },\r\n        async presentActionSheet(options) {\r\n            const actionSheet = await actionSheetController.create({\r\n                subHeader: \"اختار طريقة المشاهدة\",\r\n                header: options.title,\r\n                buttons: [\r\n                    {\r\n                        text: \"هنا جوا الأبلكيشن\",\r\n                        icon: laptopOutline,\r\n                        handler: () => {\r\n                            this.openVideo(options);\r\n                        },\r\n                    },\r\n                    {\r\n                        text: \"على أبلكيشن يوتيوب\",\r\n                        icon: logoYoutube,\r\n                        handler: () => {\r\n                            window.open(\"https://youtu.be/\" + options.videoID, \"_system\");\r\n                        },\r\n                    },\r\n                ],\r\n            });\r\n            await actionSheet.present();\r\n        },\r\n        openLecture(lecture) {\r\n            if (this.$route.query.package) {\r\n                this.$router.push({\r\n                    path: \"/lecture\",\r\n                    query: {\r\n                        id: lecture.id,\r\n                        title: lecture.title,\r\n                        type: lecture.type,\r\n                        packageId: this.$route.query.id,\r\n                    },\r\n                });\r\n\r\n            } else {\r\n                this.presentActionSheet({\r\n                    title: lecture.title,\r\n                    videoID: this.getVideoID(lecture.url),\r\n                })\r\n            }\r\n        },\r\n        getVideoID(url) {\r\n            const decrypted = CryptoJS.AES.decrypt(\r\n                url,\r\n                CryptoJS.enc.Utf8.parse(\"aplusencurlsaify\"),\r\n                {\r\n                    mode: CryptoJS.mode.CBC,\r\n                    iv: CryptoJS.enc.Utf8.parse(\"apluscode.comivs\"),\r\n                    padding: CryptoJS.pad.Pkcs7,\r\n                }\r\n            ).toString(CryptoJS.enc.Utf8);\r\n\r\n            return decrypted.substring(decrypted.lastIndexOf(\"/\") + 1);\r\n        },\r\n        async openVideo(options) {\r\n            const modal = await modalController.create({\r\n                component: VideoModal,\r\n                componentProps: options,\r\n                cssClass: \"video-modal\",\r\n                backdropDismiss: false,\r\n                showBackdrop: true,\r\n            });\r\n            return modal.present();\r\n        },\r\n        segmentChanged(ev) {\r\n            this.segment = ev.detail.value;\r\n        },\r\n        getData() {\r\n            this.error = false;\r\n            this.loading = true;\r\n            axios\r\n                .get(\r\n                    this.$route.query.package ?\r\n                        \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getPackageCourses?package=\" +\r\n                        this.$route.query.id :\r\n\r\n                        \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getCourseFiles?cId=\" +\r\n                        this.$route.query.id +\r\n                        \"&package=\" + (this.$route.query.packageId ?? \"0\") + \"&type=0&sub=0\",\r\n                    { crossdomain: true }\r\n                )\r\n                .then((res) => {\r\n                    if (res.data.code == 200) this.data = res.data.data;\r\n                    else this.error = true;\r\n                    this.loading = false;\r\n                })\r\n                .catch((err) => {\r\n                    console.error(err);\r\n                    this.error = true;\r\n                    this.loading = false;\r\n                });\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.courses-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n}\r\n.wrapper,\r\n.error-wrapper {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n.course {\r\n    --background: transparent;\r\n}\r\nion-card {\r\n    box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px,\r\n        rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\r\n    border-radius: 8px;\r\n}\r\n</style>","import { render } from \"./LecturePage.vue?vue&type=template&id=2edefa64&scoped=true\"\nimport script from \"./LecturePage.vue?vue&type=script&lang=js\"\nexport * from \"./LecturePage.vue?vue&type=script&lang=js\"\n\nimport \"./LecturePage.vue?vue&type=style&index=0&id=2edefa64&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Development\\\\Projects\\\\Applications\\\\Elsaify-v1\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2edefa64\"]])\n\nexport default __exports__"],"names":["class","slot","icon","arrowForward","$route","query","title","name","mode","loading","color","error","size","style","getData","refresh","data","video","key","id","button","detail","lines","playCircle","src","img","components","IonPage","IonContent","IonHeader","IonToolbar","IonTitle","IonButtons","IonBackButton","IonLabel","IonItem","IonAvatar","IonImg","IonSpinner","IonCard","IonText","IonFabButton","IonIcon","mounted","this","watch","handler","route","console","log","deep","immediate","methods","async","alert","header","message","inputs","placeholder","type","buttons","text","role","cssClass","present","uninterceptedAxios","headers","token","get","code","crossdomain","then","res","onDidDismiss","useQR","dismiss","catch","err","options","actionSheet","subHeader","openVideo","window","open","videoID","openLecture","lecture","package","$router","push","path","packageId","presentActionSheet","getVideoID","url","decrypted","iv","padding","toString","substring","lastIndexOf","modal","component","VideoModal","componentProps","backdropDismiss","showBackdrop","segmentChanged","ev","segment","value","__exports__","render"],"sourceRoot":""}