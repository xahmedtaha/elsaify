{"version":3,"file":"js/176.4e30021a.js","mappings":"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","sources":["webpack://elsaify/./src/views/HomePage.vue","webpack://elsaify/./src/views/HomePage.vue?150d"],"sourcesContent":["<template>\n  <ion-page>\n    <!-- <ion-header>\n      <ion-toolbar>\n        <ion-title>Tab 1</ion-title>\n      </ion-toolbar>\n    </ion-header>-->\n    <ion-content>\n      <!-- <ion-header collapse=\"condense\">\n        <ion-toolbar>\n          <ion-title size=\"large\">Tab 1</ion-title>\n        </ion-toolbar>\n        \n      </ion-header>-->\n      <main>\n        <transition name=\"fade\" mode=\"out-in\">\n          <div class=\"wrapper\" v-if=\"loading\">\n            <ion-img class=\"logo\" src=\"/assets/img/amr.png\"></ion-img>\n            <ion-spinner color=\"primary\" name=\"crescent\"></ion-spinner>\n          </div>\n          <div v-else-if=\"!error\" class=\"courses-wrapper\">\n            <ion-img class=\"logo\" src=\"/assets/img/amr.png\"></ion-img>\n            <ion-card>\n              <ion-segment :value=\"segment\" @ionChange=\"segmentChanged($event)\">\n                <ion-segment-button value=\"lectures\">\n                  <ion-label>السناتر</ion-label>\n                </ion-segment-button>\n                <ion-segment-button value=\"homeworks\">\n                  <ion-label>الأونلاين</ion-label>\n                </ion-segment-button>\n              </ion-segment>\n            </ion-card>\n            <transition name=\"fade\" mode=\"out-in\">\n              <div v-if=\"segment === 'lectures'\">\n                <ion-accordion-group expand=\"inset\">\n                  <ion-accordion\n                    v-for=\"(lectures, title, index) in groupBy(this.lectures, 'parentName')\"\n                    :key=\"index\"\n                  >\n                    <ion-item lines=\"none\" slot=\"header\">\n                      <ion-label>{{ title }}</ion-label>\n                      <ion-badge class=\"number-badge\" mode=\"ios\" color=\"light\" slot=\"end\">\n                        {{\n                          lectures.length\n                        }}\n                      </ion-badge>\n                    </ion-item>\n\n                    <ion-list slot=\"content\">\n                      <ion-item\n                        @click=\"isLectureAvailable(lecture) ? goToLecture(lecture) : useQR(lecture)\"\n                        v-for=\"lecture in lectures\"\n                        :key=\"lecture.id\"\n                        button\n                        detail\n                        :detail-icon=\"isLectureAvailable(lecture) ? chevronBack : lockClosed\"\n                        lines=\"none\"\n                        class=\"lecture\"\n                      >\n                        <ion-avatar slot=\"start\">\n                          <ion-img\n                            :src=\"\n                              'https://elsaify.elameed.education/elsefy/' +\n                              lecture.img\n                            \"\n                          />\n                        </ion-avatar>\n                        <ion-label>{{ lecture.title }}</ion-label>\n                      </ion-item>\n                    </ion-list>\n                  </ion-accordion>\n                </ion-accordion-group>\n              </div>\n              <div v-else-if=\"segment === 'homeworks'\">\n                <course-tile\n                  is-lecture\n                  dense\n                  invert\n                  package\n                  class=\"course\"\n                  v-for=\"course in homeworks.sort(sortCourses)\"\n                  :course=\"course\"\n                  :key=\"course.id\"\n                ></course-tile>\n              </div>\n            </transition>\n          </div>\n          <div class=\"error-wrapper\" v-else>\n            <ion-img src=\"/assets/img/amr.png\"></ion-img>\n            <ion-text color=\"danger\">ممكن تكون فاصل نت أو موقع الصيفي مش متاح</ion-text>\n            <ion-button\n              size=\"small\"\n              style=\"margin-top: 15px; --box-shadow: none\"\n              @click=\"getCourses\"\n            >حاول تاني</ion-button>\n          </div>\n        </transition>\n      </main>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script>\nimport {\n  IonPage,\n  IonSpinner,\n  IonImg,\n  IonText,\n  IonButton,\n  IonContent,\n  IonSegment,\n  IonSegmentButton,\n  IonLabel,\n  IonCard,\n  IonAccordion,\n  IonAccordionGroup,\n  IonItem,\n  IonBadge,\n  IonAvatar,\n  IonList,\n  alertController,\n  loadingController,\n} from \"@ionic/vue\";\nimport { chevronBack, lockClosed } from \"ionicons/icons\";\nimport axios from \"axios\";\nimport CourseTile from \"../components/CourseTile.vue\";\nimport { useAuth } from \"../stores/auth\";\n\nconst groupBy = require('lodash.groupby');\n\nexport default {\n  mounted() {\n    this.getCourses();\n  },\n  data: () => ({\n    loading: true,\n    homeworks: [],\n    lectures: [],\n    homeworksError: false,\n    lecturesError: false,\n    error: false,\n    sortWords: [\n      \"الاول\",\n      \"الأول\",\n      \"الثاني\",\n      \"الثانى\",\n      \"الثالث\",\n      \"الرابع\",\n      \"الخامس\",\n    ],\n    lockClosed,\n    chevronBack,\n    segment: \"lectures\",\n  }),\n  methods: {\n    groupBy,\n    segmentChanged(ev) {\n      ev.preventDefault();\n      this.segment = ev.detail.value;\n\n    },\n    sortCourses(a, b) {\n      return (\n        this.sortWords.findIndex((v) => a.text.includes(v)) -\n        this.sortWords.findIndex((v) => b.text.includes(v))\n      );\n    },\n    isLectureAvailable(lecture) {\n      return lecture.countC > 0 || lecture.money == \"0.00\";\n    },\n    async useQR(lecture) {\n      const alert = await alertController.create({\n        header: lecture.title,\n        message: 'اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا',\n        inputs: [\n          {\n            name: 'code',\n            placeholder: 'كود الكيو ار',\n            type: 'text',\n          },\n        ],\n        buttons: [\n          { text: \"الغاء\", role: \"cancel\", cssClass: 'secondary', },\n          {\n            text: \"تأكيد\",\n            handler: async (data) => {\n              const loading = await loadingController\n                .create({\n                  message: 'استنى نفعل الكود',\n                });\n              await loading.present();\n              const uninterceptedAxios = axios.create({\n                headers: {\n                  \"Authentication\": \"Bearer \" + useAuth().token,\n                },\n              });\n              uninterceptedAxios\n                .get(\n                  \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId=\" +\n                  lecture.id +\n                  \"&code=\" + data.code,\n                  { crossdomain: true }\n                )\n                .then((res) => {\n                  if (res.data.code == 200) this.goToLecture(lecture);\n                  else alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\n                    alert.present();\n                    alert.onDidDismiss().then(() => {\n                      this.useQR(lecture);\n                    })\n                  });\n                  loading.dismiss()\n                })\n                .catch((err) => {\n                  console.error(err);\n                  alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\n                    alert.present();\n                    alert.onDidDismiss().then(() => {\n                      this.useQR(lecture);\n                    })\n                  });\n                  loading.dismiss()\n                });\n            },\n          }\n        ],\n        mode: \"ios\",\n      });\n      await alert.present();\n\n      const { role } = await alert.onDidDismiss();\n      console.log(\"onDidDismiss resolved with role\", role);\n    },\n    getCourses() {\n      this.error = false;\n      this.loading = true;\n      Promise.all([\n        axios.get(\n          \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getSubCourses?package=1&sub=0&type=0\",\n          { crossdomain: true }\n        ),\n        axios.get(\n          \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getSubCourses?package=0&sub=0&type=0\",\n          { crossdomain: true }\n        ),\n      ])\n        .then((res) => {\n          console.log(res);\n\n          // Homeworks\n          if (res[0].data.code == 200) this.homeworks = res[0].data.data;\n          else this.homeworksError = true;\n\n          // Lectures\n          if (res[1].data.code == 200) this.lectures = res[1].data.data;\n          else this.lecturesError = true;\n\n          this.loading = false;\n        })\n        .catch((err) => {\n          console.error(err);\n          this.error = true;\n          this.loading = false;\n        });\n    },\n    goToLecture(lecture) {\n      this.$router.push({\n        path: \"/lecture\",\n        query: {\n          id: lecture.id,\n          title: lecture.title,\n          type: lecture.type,\n        },\n      });\n    },\n  },\n  components: {\n    // IonHeader,\n    // IonToolbar,\n    // IonTitle,\n    IonContent,\n    IonPage,\n    CourseTile,\n    IonSpinner,\n    IonImg,\n    IonText,\n    IonButton,\n    IonSegment,\n    IonSegmentButton,\n    IonCard,\n    IonAccordion,\n    IonAccordionGroup,\n    IonItem,\n    IonLabel,\n    IonBadge,\n    IonAvatar,\n    IonList,\n  },\n};\n</script>\n\n<style scoped>\nion-card {\n  box-shadow: none;\n  background: transparent;\n}\n.courses-wrapper {\n  padding: 15px;\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.error-wrapper {\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\nion-img.logo {\n  margin-right: auto;\n  margin-left: auto;\n  height: 135px;\n  margin-bottom: 30px;\n  margin-top: 40px;\n}\n.lecture {\n  --background: transparent;\n}\nion-accordion {\n  box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px,\n    rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\n  border-radius: 8px;\n  margin-bottom: 15px;\n}\n</style>","import { render } from \"./HomePage.vue?vue&type=template&id=377d3f68&scoped=true\"\nimport script from \"./HomePage.vue?vue&type=script&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=377d3f68&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Development\\\\Projects\\\\Applications\\\\Elsaify-v1\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-377d3f68\"]])\n\nexport default __exports__"],"names":["class","name","mode","loading","src","color","error","size","style","getCourses","value","segment","segmentChanged","$event","expand","groupBy","lectures","title","index","key","lines","slot","length","lecture","isLectureAvailable","goToLecture","useQR","id","button","detail","chevronBack","lockClosed","homeworks","sort","sortCourses","course","dense","invert","package","mounted","this","data","homeworksError","lecturesError","sortWords","methods","ev","preventDefault","a","b","findIndex","v","text","includes","countC","money","async","alert","header","message","inputs","placeholder","type","buttons","role","cssClass","handler","present","uninterceptedAxios","headers","token","get","code","crossdomain","then","res","onDidDismiss","dismiss","catch","err","console","log","Promise","all","$router","push","path","query","components","IonContent","IonPage","CourseTile","IonSpinner","IonImg","IonText","IonButton","IonSegment","IonSegmentButton","IonCard","IonAccordion","IonAccordionGroup","IonItem","IonLabel","IonBadge","IonAvatar","IonList","__exports__","render"],"sourceRoot":""}