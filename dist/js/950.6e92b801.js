"use strict";(self["webpackChunkelsaify"]=self["webpackChunkelsaify"]||[]).push([[950],{5172:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var n=o(6252),a=o(3577),s=o(9963);const i={key:0,class:"wrapper"},r={key:1,class:"courses-wrapper"},l={key:2,class:"error-wrapper"},d=(0,n.Uk)("ممكن تكون فاصل نت أو موقع الصيفي مش متاح"),c=(0,n.Uk)("(اتأكد انك مشترك في المحاضرة)"),u=(0,n.Uk)("استعمل ال QR");function p(e,t,o,p,m,h){const w=(0,n.up)("ion-back-button"),f=(0,n.up)("ion-buttons"),g=(0,n.up)("ion-title"),y=(0,n.up)("ion-toolbar"),k=(0,n.up)("ion-header"),I=(0,n.up)("ion-spinner"),b=(0,n.up)("ion-img"),C=(0,n.up)("ion-avatar"),W=(0,n.up)("ion-label"),_=(0,n.up)("ion-item"),v=(0,n.up)("ion-card"),D=(0,n.up)("ion-icon"),x=(0,n.up)("ion-fab-button"),B=(0,n.up)("ion-text"),U=(0,n.up)("ion-button"),A=(0,n.up)("ion-content"),Q=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(Q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{icon:e.arrowForward,"default-href":"/"},null,8,["icon"])])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(this.$route.query.title),1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(A,null,{default:(0,n.w5)((()=>[(0,n._)("main",null,[(0,n.Wm)(s.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[e.loading?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(I,{color:"primary",name:"crescent"})])):e.error?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(x,{color:"danger",size:"small",style:{"margin-top":"20px","--box-shadow":"none"},onClick:h.getData},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{icon:e.refresh},null,8,["icon"])])),_:1},8,["onClick"]),(0,n.Wm)(B,{color:"danger"},{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(B,{color:"primary"},{default:(0,n.w5)((()=>[c])),_:1}),(0,n.Wm)(U,{onClick:h.useQR,style:{"margin-top":"15px"},size:"small"},{default:(0,n.w5)((()=>[u])),_:1},8,["onClick"])])):((0,n.wg)(),(0,n.iD)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,(t=>((0,n.wg)(),(0,n.j4)(v,{key:t.id,onClick:e=>h.presentActionSheet({title:t.title,videoID:h.getVideoID(t.url)}),button:""},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{detail:"",lines:"none","detail-icon":e.playCircle,class:"course"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{src:"https://elsaify.elameed.education/elsefy/"+t.img},null,8,["src"])])),_:2},1024),(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.title),1)])),_:2},1024)])),_:2},1032,["detail-icon"])])),_:2},1032,["onClick"])))),128))]))])),_:1})])])),_:1})])),_:1})}var m=o(9490),h=o(8903),w=o(9669),f=o.n(w),g=o(1354),y=o.n(g),k=o(1084),I=o(9865),b={data:()=>({loading:!0,data:[],error:!1,playCircle:h.l7M,arrowForward:h.kVA,refresh:h.biU}),components:{IonPage:m._i,IonContent:m.W2,IonHeader:m.Gu,IonToolbar:m.sr,IonTitle:m.wd,IonButtons:m.Sm,IonBackButton:m.oU,IonLabel:m.Q$,IonItem:m.Ie,IonAvatar:m.BJ,IonImg:m.Xz,IonSpinner:m.PQ,IonCard:m.PM,IonButton:m.YG,IonText:m.yW,IonFabButton:m.W4,IonIcon:m.gu},mounted(){this.getData()},methods:{async useQR(){const e=await m.Cl.create({header:"QR",message:"اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا",inputs:[{name:"code",placeholder:"كود الكيو ار",type:"text"}],buttons:[{text:"الغاء",role:"cancel",cssClass:"secondary"},{text:"تأكيد",handler:async e=>{const t=await m.G0.create({message:"استنى نفعل الكود"});await t.present();const o=f().create({headers:{Authentication:"Bearer "+(0,I.a)().token}});o.get("https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId="+this.$route.query.id+"&code="+e.code,{crossdomain:!0}).then((e=>{200==e.data.code?this.getData():m.Cl.create({header:"مشكلة !",message:"الكود مش صح",buttons:["تمام"],mode:"ios"}).then((e=>e.present())),t.dismiss()})).catch((e=>{console.error(e),m.Cl.create({header:"مشكلة !",message:"الكود مش صح",buttons:["تمام"],mode:"ios"}).then((e=>e.present())),t.dismiss()}))}}],mode:"ios"});await e.present();const{role:t}=await e.onDidDismiss();console.log("onDidDismiss resolved with role",t)},async presentActionSheet(e){const t=await m.BO.create({subHeader:"اختار طريقة المشاهدة",header:e.title,buttons:[{text:"هنا جوا الأبلكيشن",icon:h.niN,handler:()=>{this.openVideo(e)}},{text:"على أبلكيشن يوتيوب",icon:h.Iir,handler:()=>{window.open("https://youtu.be/"+e.videoID,"_system")}}]});await t.present()},getVideoID(e){const t=y().AES.decrypt(e,y().enc.Utf8.parse("aplusencurlsaify"),{mode:y().mode.CBC,iv:y().enc.Utf8.parse("apluscode.comivs"),padding:y().pad.Pkcs7}).toString(y().enc.Utf8);return t.substring(t.lastIndexOf("/")+1)},async openVideo(e){const t=await m.Fy.create({component:k.Z,componentProps:e,cssClass:"video-modal",backdropDismiss:!1,showBackdrop:!0});return t.present()},segmentChanged(e){this.segment=e.detail.value},getData(){this.error=!1,this.loading=!0,f().get("https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getCourseFiles?cId="+this.$route.query.id+"&package=0&type=0&sub=0",{crossdomain:!0}).then((e=>{200==e.data.code?this.data=e.data.data:this.error=!0,this.loading=!1})).catch((e=>{console.error(e),this.error=!0,this.loading=!1}))}}},C=o(3744);const W=(0,C.Z)(b,[["render",p],["__scopeId","data-v-00bdc0b3"]]);var _=W}}]);
//# sourceMappingURL=950.6e92b801.js.map