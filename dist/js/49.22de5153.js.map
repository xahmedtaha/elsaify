{"version":3,"file":"js/49.22de5153.js","mappings":"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","sources":["webpack://elsaify/./src/views/HomeworksPage.vue","webpack://elsaify/./src/views/HomeworksPage.vue?a294"],"sourcesContent":["<template>\r\n    <ion-page>\r\n        <!-- <ion-header>\r\n      <ion-toolbar color=\"primary\">\r\n        <ion-title>التواصل مع المستر</ion-title>\r\n      </ion-toolbar>\r\n        </ion-header>-->\r\n        <ion-content>\r\n            <!-- <ion-header collapse=\"condense\">\r\n        <ion-toolbar>\r\n          <ion-title size=\"large\">التواصل مع المستر</ion-title>\r\n        </ion-toolbar>\r\n            </ion-header>-->\r\n            <main>\r\n                <div>\r\n                    <div>\r\n                        <lottie :options=\"animationOptions\" :height=\"180\" />\r\n                    </div>\r\n                    <transition name=\"fade\" mode=\"out-in\">\r\n                        <div class=\"wrapper\" v-if=\"loading\">\r\n                            <ion-spinner color=\"primary\" name=\"crescent\"></ion-spinner>\r\n                        </div>\r\n                        <div v-else-if=\"!error\" class=\"courses-wrapper\">\r\n                            <transition name=\"fade\" mode=\"out-in\">\r\n                                <div class=\"error-wrapper\" v-if=\"error\">\r\n                                    <ion-text color=\"danger\">ممكن تكون فاصل نت أو موقع الصيفي مش متاح</ion-text>\r\n                                    <ion-button size=\"small\" style=\"margin-top: 15px; --box-shadow: none\"\r\n                                        @click=\"getCourses\">حاول تاني</ion-button>\r\n                                </div>\r\n                                <div v-else>\r\n                                    <course-tile dense class=\"course\" v-for=\"course in homeworks.sort(sortCourses)\"\r\n                                        :course=\"course\" :key=\"course.id\"></course-tile>\r\n                                </div>\r\n                            </transition>\r\n                        </div>\r\n                    </transition>\r\n                </div>\r\n            </main>\r\n        </ion-content>\r\n    </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport lottie from \"../components/LottiePlayer.vue\";\r\nimport * as homeworksAnimation from \"../../public/assets/animations/homeworks.json\";\r\nimport {\r\n    IonPage,\r\n    IonSpinner,\r\n    IonText,\r\n    IonButton,\r\n    IonContent,\r\n    alertController,\r\n    loadingController,\r\nactionSheetController,\r\n} from \"@ionic/vue\";\r\nimport { chevronBack, lockClosed, qrCode, wallet } from \"ionicons/icons\";\r\nimport axios from \"axios\";\r\nimport CourseTile from \"../components/CourseTile.vue\";\r\nimport { useAuth } from \"../stores/auth\";\r\n\r\nconst groupBy = require('lodash.groupby');\r\n\r\nexport default {\r\n    mounted() {\r\n        this.getCourses();\r\n    },\r\n    data: () => ({\r\n        loading: true,\r\n        homeworks: [],\r\n        lectures: [],\r\n        homeworksError: false,\r\n        lecturesError: false,\r\n        error: false,\r\n        sortWords: [\r\n            \"الاول\",\r\n            \"الأول\",\r\n            \"الثاني\",\r\n            \"الثانى\",\r\n            \"الثالث\",\r\n            \"الرابع\",\r\n            \"الخامس\",\r\n        ],\r\n        lockClosed,\r\n        chevronBack,\r\n        segment: \"lectures\",\r\n        animationOptions: { animationData: homeworksAnimation },\r\n    }),\r\n    methods: {\r\n        groupBy,\r\n        segmentChanged(ev) {\r\n            ev.preventDefault();\r\n            this.segment = ev.detail.value;\r\n\r\n        },\r\n        sortCourses(a, b) {\r\n            return (\r\n                this.sortWords.findIndex((v) => a.text.includes(v)) -\r\n                this.sortWords.findIndex((v) => b.text.includes(v))\r\n            );\r\n        },\r\n        isLectureAvailable(lecture) {\r\n            return lecture.countC > 0 || lecture.money == \"0.00\";\r\n        },\r\n\r\n\r\n\r\n\r\n        async showPurchaseActions(lecture) {\r\n            const actionSheet = await actionSheetController.create({\r\n                subHeader: \"اختار طريقة التفعيل\",\r\n                header: \"تفعيل: \" + lecture.title,\r\n                buttons: [\r\n                    {\r\n                        text: \"رصيد المحفظة\",\r\n                        icon: wallet,\r\n                        handler: () => {\r\n                            this.useWallet(lecture)\r\n                        },\r\n                    },\r\n                    {\r\n                        text: \"الكيو ار\",\r\n                        icon: qrCode,\r\n                        handler: () => {\r\n                            this.useQR(lecture)\r\n                        },\r\n                    },\r\n                ],\r\n            });\r\n            await actionSheet.present();\r\n        },\r\n        async useWallet(lecture) {\r\n            const loading = await loadingController\r\n                .create({\r\n                    message: 'استنى نفعل من المحفظة',\r\n                });\r\n            await loading.present();\r\n            const uninterceptedAxios = axios.create({\r\n                headers: {\r\n                    \"Authentication\": \"Bearer \" + useAuth().token,\r\n                },\r\n            });\r\n            uninterceptedAxios\r\n                .get(\r\n                    \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseWallet?courseId=\" +\r\n                    lecture.id,\r\n                    { crossdomain: true }\r\n                )\r\n                .then((res) => {\r\n                    if (res.data.code == 200) this.goToLecture(lecture);\r\n                    else alertController.create({ header: \"مشكلة !\", message: 'رصيد محفظتك مش كفاية', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                        alert.present();\r\n                    });\r\n                    loading.dismiss()\r\n                })\r\n                .catch((err) => {\r\n                    console.error(err);\r\n                    alertController.create({ header: \"مشكلة !\", message: 'رصيد محفظتك مش كفاية', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                        alert.present();\r\n                    });\r\n                    loading.dismiss()\r\n                });\r\n        },\r\n\r\n\r\n        async useQR(lecture) {\r\n            const alert = await alertController.create({\r\n                header: lecture.title,\r\n                message: 'اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا',\r\n                inputs: [\r\n                    {\r\n                        name: 'code',\r\n                        placeholder: 'كود الكيو ار',\r\n                        type: 'text',\r\n                    },\r\n                ],\r\n                buttons: [\r\n                    { text: \"الغاء\", role: \"cancel\", cssClass: 'secondary', },\r\n                    {\r\n                        text: \"تأكيد\",\r\n                        handler: async (data) => {\r\n                            const loading = await loadingController\r\n                                .create({\r\n                                    message: 'استنى نفعل الكود',\r\n                                });\r\n                            await loading.present();\r\n                            const uninterceptedAxios = axios.create({\r\n                                headers: {\r\n                                    \"Authentication\": \"Bearer \" + useAuth().token,\r\n                                },\r\n                            });\r\n                            uninterceptedAxios\r\n                                .get(\r\n                                    \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId=\" +\r\n                                    lecture.id +\r\n                                    \"&code=\" + data.code,\r\n                                    { crossdomain: true }\r\n                                )\r\n                                .then((res) => {\r\n                                    if (res.data.code == 200) this.goToLecture(lecture);\r\n                                    else alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                                        alert.present();\r\n                                        alert.onDidDismiss().then(() => {\r\n                                            this.useQR(lecture);\r\n                                        })\r\n                                    });\r\n                                    loading.dismiss()\r\n                                })\r\n                                .catch((err) => {\r\n                                    console.error(err);\r\n                                    alertController.create({ header: \"مشكلة !\", message: 'الكود مش مظبوط', buttons: [\"تمام\"], mode: 'ios', }).then(alert => {\r\n                                        alert.present();\r\n                                        alert.onDidDismiss().then(() => {\r\n                                            this.useQR(lecture);\r\n                                        })\r\n                                    });\r\n                                    loading.dismiss()\r\n                                });\r\n                        },\r\n                    }\r\n                ],\r\n                mode: \"ios\",\r\n            });\r\n            await alert.present();\r\n\r\n            const { role } = await alert.onDidDismiss();\r\n            console.log(\"onDidDismiss resolved with role\", role);\r\n        },\r\n        getCourses() {\r\n            this.error = false;\r\n            this.loading = true;\r\n            Promise.all([\r\n                axios.get(\r\n                    \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getSubCourses?package=0&sub=0&type=5\",\r\n                    { crossdomain: true }\r\n                ),\r\n                // axios.get(\r\n                //     \"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getSubCourses?package=0&sub=0&type=0\",\r\n                //     { crossdomain: true }\r\n                // ),\r\n            ])\r\n                .then((res) => {\r\n                    console.log(res);\r\n\r\n                    // Homeworks\r\n                    if (res[0].data.code == 200) this.homeworks = res[0].data.data;\r\n                    else this.homeworksError = true;\r\n\r\n                    // // Lectures\r\n                    // if (res[1].data.code == 200) this.lectures = res[1].data.data;\r\n                    // else this.lecturesError = true;\r\n\r\n                    this.loading = false;\r\n                })\r\n                .catch((err) => {\r\n                    console.error(err);\r\n                    this.error = true;\r\n                    this.loading = false;\r\n                });\r\n        },\r\n        goToLecture(lecture) {\r\n            this.$router.push({\r\n                path: \"/lecture\",\r\n                query: {\r\n                    id: lecture.id,\r\n                    title: lecture.title,\r\n                    type: lecture.type,\r\n                },\r\n            });\r\n        },\r\n    },\r\n    components: {\r\n        // IonHeader,\r\n        // IonToolbar,\r\n        // IonTitle,\r\n        IonContent,\r\n        IonPage,\r\n        CourseTile,\r\n        IonSpinner,\r\n        IonText,\r\n        IonButton,\r\n        lottie,\r\n    },\r\n};\r\n</script>\r\n<style scoped>\r\nion-card {\r\n    box-shadow: none;\r\n    background: transparent;\r\n}\r\n\r\n.courses-wrapper {\r\n    padding: 15px;\r\n    min-height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n.error-wrapper {\r\n    min-height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\nion-img.logo {\r\n    margin-right: auto;\r\n    margin-left: auto;\r\n    height: 135px;\r\n    margin-bottom: 30px;\r\n    margin-top: 40px;\r\n}\r\n\r\n.lecture {\r\n    --background: transparent;\r\n}\r\n\r\nion-accordion {\r\n    box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px,\r\n        rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;\r\n    border-radius: 8px;\r\n    margin-bottom: 15px;\r\n}\r\n</style>","import { render } from \"./HomeworksPage.vue?vue&type=template&id=afc8b126&scoped=true\"\nimport script from \"./HomeworksPage.vue?vue&type=script&lang=js\"\nexport * from \"./HomeworksPage.vue?vue&type=script&lang=js\"\n\nimport \"./HomeworksPage.vue?vue&type=style&index=0&id=afc8b126&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Development\\\\Projects\\\\Applications\\\\Elsaify-v1\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-afc8b126\"]])\n\nexport default __exports__"],"names":["class","options","animationOptions","height","name","mode","loading","color","error","size","style","getCourses","homeworks","sort","sortCourses","course","dense","key","id","groupBy","mounted","this","data","lectures","homeworksError","lecturesError","sortWords","lockClosed","chevronBack","segment","animationData","methods","segmentChanged","ev","preventDefault","detail","value","a","b","findIndex","v","text","includes","isLectureAvailable","lecture","countC","money","async","actionSheet","subHeader","header","title","buttons","icon","handler","useWallet","useQR","present","message","uninterceptedAxios","headers","token","get","crossdomain","then","res","code","goToLecture","alert","dismiss","catch","err","console","inputs","placeholder","type","role","cssClass","onDidDismiss","log","Promise","all","$router","push","path","query","components","IonContent","IonPage","CourseTile","IonSpinner","IonText","IonButton","lottie","__exports__","render"],"sourceRoot":""}