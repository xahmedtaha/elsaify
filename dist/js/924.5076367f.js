"use strict";(self["webpackChunkelsaify"]=self["webpackChunkelsaify"]||[]).push([[924],{3443:function(e,t,o){o.r(t),o.d(t,{default:function(){return D}});var a=o(6252),s=o(3577),n=o(9963);const i={key:0,class:"wrapper"},r={key:1,class:"courses-wrapper"},l={key:2,class:"error-wrapper"},d=(0,a.Uk)("ممكن تكون فاصل نت أو السيرفر مش متاح");function u(e,t,o,u,c,p){const h=(0,a.up)("ion-back-button"),m=(0,a.up)("ion-buttons"),g=(0,a.up)("ion-title"),w=(0,a.up)("ion-toolbar"),f=(0,a.up)("ion-header"),y=(0,a.up)("ion-spinner"),k=(0,a.up)("ion-img"),I=(0,a.up)("ion-avatar"),b=(0,a.up)("ion-label"),D=(0,a.up)("ion-item"),C=(0,a.up)("ion-card"),v=(0,a.up)("ion-icon"),W=(0,a.up)("ion-fab-button"),_=(0,a.up)("ion-text"),x=(0,a.up)("ion-content"),$=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{icon:e.arrowForward,"default-href":"/"},null,8,["icon"])])),_:1}),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(this.$route.query.title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a._)("main",null,[(0,a.Wm)(n.uT,{name:"fade",mode:"out-in"},{default:(0,a.w5)((()=>[e.loading?((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(y,{color:"primary",name:"crescent"})])):e.error?((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(W,{color:"danger",size:"small",style:{"margin-top":"20px","--box-shadow":"none"},onClick:p.getData},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{icon:e.refresh},null,8,["icon"])])),_:1},8,["onClick"]),(0,a.Wm)(_,{color:"danger"},{default:(0,a.w5)((()=>[d])),_:1})])):((0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.data,(t=>((0,a.wg)(),(0,a.j4)(C,{key:t.id,onClick:e=>p.openLecture(t),button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{detail:"",lines:"none","detail-icon":e.playCircle,class:"course"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{src:"https://elsaify.elameed.education/elsefy/"+t.img},null,8,["src"])])),_:2},1024),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(t.title),1)])),_:2},1024)])),_:2},1032,["detail-icon"])])),_:2},1032,["onClick"])))),128))]))])),_:1})])])),_:1})])),_:1})}var c=o(9490),p=o(8903),h=o(9669),m=o.n(h),g=o(1354),w=o.n(g),f=o(1164),y=o(9865),k={data:()=>({loading:!0,data:[],error:!1,playCircle:p.l7M,arrowForward:p.kVA,refresh:p.biU}),components:{IonPage:c._i,IonContent:c.W2,IonHeader:c.Gu,IonToolbar:c.sr,IonTitle:c.wd,IonButtons:c.Sm,IonBackButton:c.oU,IonLabel:c.Q$,IonItem:c.Ie,IonAvatar:c.BJ,IonImg:c.Xz,IonSpinner:c.PQ,IonCard:c.PM,IonText:c.yW,IonFabButton:c.W4,IonIcon:c.gu},mounted(){this.getData()},watch:{"$route.params":{handler:function(e){console.log(e),this.getData()},deep:!0,immediate:!0}},methods:{async useQR(){const e=await c.Cl.create({header:"QR",message:"اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا",inputs:[{name:"code",placeholder:"كود الكيو ار",type:"text"}],buttons:[{text:"الغاء",role:"cancel",cssClass:"secondary"},{text:"تأكيد",handler:async e=>{const t=await c.G0.create({message:"استنى نفعل الكود"});await t.present();const o=m().create({headers:{Authentication:"Bearer "+(0,y.a)().token}});o.get("https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId="+this.$route.query.id+"&code="+e.code,{crossdomain:!0}).then((e=>{200==e.data.code?this.getData():c.Cl.create({header:"مشكلة !",message:"الكود مش مظبوط",buttons:["تمام"],mode:"ios"}).then((e=>{e.present(),e.onDidDismiss().then((()=>{this.useQR()}))})),t.dismiss()})).catch((e=>{console.error(e),c.Cl.create({header:"مشكلة !",message:"الكود مش مظبوط",buttons:["تمام"],mode:"ios"}).then((e=>{e.present(),e.onDidDismiss().then((()=>{this.useQR()}))})),t.dismiss()}))}}],mode:"ios"});await e.present();const{role:t}=await e.onDidDismiss();console.log("onDidDismiss resolved with role",t)},async presentActionSheet(e){const t=await c.BO.create({subHeader:"اختار طريقة المشاهدة",header:e.title,buttons:[{text:"هنا جوا الأبلكيشن",icon:p.niN,handler:()=>{this.openVideo(e)}},{text:"على أبلكيشن يوتيوب",icon:p.Iir,handler:()=>{window.open("https://youtu.be/"+e.videoID,"_system")}}]});await t.present()},openLecture(e){this.$route.query.package?this.$router.push({path:"/lecture",query:{id:e.id,title:e.title,type:e.type,packageId:this.$route.query.id}}):this.presentActionSheet({title:e.title,videoID:this.getVideoID(e.url)})},getVideoID(e){const t=w().AES.decrypt(e,w().enc.Utf8.parse("aplusencurlsaify"),{mode:w().mode.CBC,iv:w().enc.Utf8.parse("apluscode.comivs"),padding:w().pad.Pkcs7}).toString(w().enc.Utf8);return t.substring(t.lastIndexOf("/")+1)},async openVideo(e){const t=await c.Fy.create({component:f.Z,componentProps:e,cssClass:"video-modal",backdropDismiss:!1,showBackdrop:!0});return t.present()},segmentChanged(e){this.segment=e.detail.value},getData(){this.error=!1,this.loading=!0,m().get(this.$route.query.package?"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getPackageCourses?package="+this.$route.query.id:"https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getCourseFiles?cId="+this.$route.query.id+"&package="+(this.$route.query.packageId??"0")+"&type=0&sub=0",{crossdomain:!0}).then((e=>{200==e.data.code?this.data=e.data.data:this.error=!0,this.loading=!1})).catch((e=>{console.error(e),this.error=!0,this.loading=!1}))}}},I=o(3744);const b=(0,I.Z)(k,[["render",u],["__scopeId","data-v-2edefa64"]]);var D=b}}]);
//# sourceMappingURL=924.5076367f.js.map