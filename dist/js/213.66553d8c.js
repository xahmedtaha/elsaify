"use strict";(self["webpackChunkelsaify"]=self["webpackChunkelsaify"]||[]).push([[213],{6456:function(e,t,o){o.r(t),o.d(t,{default:function(){return U}});var n=o(6252),s=o(3577),i=o(9963);const a=(0,n.Uk)("الواجبات"),l=(0,n.Uk)("الامتحانات"),d={key:0,class:"wrapper"},r={key:1,class:"courses-wrapper"},u={key:0},c={key:1},m={key:2,class:"error-wrapper"},p=(0,n.Uk)("ممكن تكون فاصل نت أو موقع الصيفي مش متاح"),w=(0,n.Uk)("(اتأكد انك مشترك في الباب)"),h=(0,n.Uk)("استعمل ال QR");function f(e,t,o,f,g,k){const W=(0,n.up)("ion-back-button"),y=(0,n.up)("ion-buttons"),I=(0,n.up)("ion-title"),_=(0,n.up)("ion-toolbar"),b=(0,n.up)("ion-label"),D=(0,n.up)("ion-segment-button"),C=(0,n.up)("ion-segment"),v=(0,n.up)("ion-header"),x=(0,n.up)("ion-spinner"),U=(0,n.up)("ion-badge"),B=(0,n.up)("ion-item"),S=(0,n.up)("ion-img"),z=(0,n.up)("ion-avatar"),V=(0,n.up)("ion-list"),A=(0,n.up)("ion-accordion"),Q=(0,n.up)("ion-accordion-group"),H=(0,n.up)("ion-icon"),R=(0,n.up)("ion-fab-button"),j=(0,n.up)("ion-text"),q=(0,n.up)("ion-button"),F=(0,n.up)("ion-content"),G=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(G,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{icon:e.arrowForward,"default-href":"/"},null,8,["icon"])])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(this.$route.query.title),1)])),_:1})])),_:1}),(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{value:e.segment,onIonChange:t[0]||(t[0]=e=>k.segmentChanged(e))},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{value:"lessons"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[a])),_:1})])),_:1}),(0,n.Wm)(D,{value:"exams"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[l])),_:1})])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),(0,n.Wm)(F,null,{default:(0,n.w5)((()=>[(0,n._)("main",null,[(0,n.Wm)(i.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[e.loading?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(x,{color:"primary",name:"crescent"})])):e.error?((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(R,{color:"danger",size:"small",style:{"margin-top":"20px","--box-shadow":"none"},onClick:k.getData},{default:(0,n.w5)((()=>[(0,n.Wm)(H,{icon:e.refresh},null,8,["icon"])])),_:1},8,["onClick"]),(0,n.Wm)(j,{color:"danger"},{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(j,{color:"primary"},{default:(0,n.w5)((()=>[w])),_:1}),(0,n.Wm)(q,{onClick:k.useQR,style:{"margin-top":"15px"},size:"small"},{default:(0,n.w5)((()=>[h])),_:1},8,["onClick"])])):((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(i.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>["exams"==e.segment?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(Q,{expand:"inset"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(k.getVideoSections(k.exams),((t,o)=>((0,n.wg)(),(0,n.j4)(A,{key:o},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{lines:"none",slot:"header"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.title),1)])),_:2},1024),(0,n.Wm)(U,{mode:"ios",color:"light",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.data.length),1)])),_:2},1024)])),_:2},1024),(0,n.Wm)(V,{slot:"content"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,(t=>((0,n.wg)(),(0,n.j4)(B,{onClick:e=>k.presentActionSheet({title:t.title,videoID:k.getVideoID(t.url)}),key:t.id,button:"",detail:"",lines:"none","detail-icon":e.playCircle,class:"course"},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{src:"https://elsaify.elameed.education/elsefy/"+t.img},null,8,["src"])])),_:2},1024),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.title),1)])),_:2},1024)])),_:2},1032,["onClick","detail-icon"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):"lessons"==e.segment?((0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(Q,{expand:"inset"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(k.getVideoSections(k.homeworks),((t,o)=>((0,n.wg)(),(0,n.j4)(A,{key:o},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{lines:"none",slot:"header"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.title),1)])),_:2},1024),(0,n.Wm)(U,{mode:"ios",color:"light",slot:"end"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.data.length),1)])),_:2},1024)])),_:2},1024),(0,n.Wm)(V,{slot:"content"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,(t=>((0,n.wg)(),(0,n.j4)(B,{onClick:e=>k.presentActionSheet({title:t.title,videoID:k.getVideoID(t.url)}),key:t.id,button:"",detail:"",lines:"none","detail-icon":e.playCircle,class:"course"},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{src:"https://elsaify.elameed.education/elsefy/"+t.img},null,8,["src"])])),_:2},1024),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.title),1)])),_:2},1024)])),_:2},1032,["onClick","detail-icon"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(0,n.kq)("",!0)])),_:1})]))])),_:1})])])),_:1})])),_:1})}var g=o(9490),k=o(8903),W=o(9669),y=o.n(W),I=o(1354),_=o.n(I),b=o(1084),D=o(9865),C={data:()=>({loading:!0,data:[],error:!1,playCircle:k.l7M,arrowForward:k.kVA,refresh:k.biU,segment:"lessons",sortWords:["الاول","الأول","الأولى","الثاني","الثانى","التاني","التانى","الثانية","الثالث","التالت","الثالثة","الرابع","الرابعة","الخامس","الخامسة","السادس","السادسة","السابع","السابعة","الثامن","الثامنة","التاسع","التاسعة","العاشر","العاشرة","الحادي عشر","الحادية عشر","الثاني عشر","الثانية عشر","الثالث عشر","الثالثة عشر","شاملة"]}),components:{IonPage:g._i,IonContent:g.W2,IonHeader:g.Gu,IonToolbar:g.sr,IonTitle:g.wd,IonButtons:g.Sm,IonBackButton:g.oU,IonSegment:g.cJ,IonSegmentButton:g.GO,IonText:g.yW,IonLabel:g.Q$,IonItem:g.Ie,IonAvatar:g.BJ,IonImg:g.Xz,IonButton:g.YG,IonSpinner:g.PQ,IonAccordion:g.We,IonAccordionGroup:g.eh,IonList:g.q_,IonBadge:g.yp,IonFabButton:g.W4,IonIcon:g.gu},mounted(){this.getData()},methods:{async useQR(){const e=await g.Cl.create({header:"QR",message:"اعمل اسكان للكيو ار بتليفونك و دخل الكود اللي طلع هنا",inputs:[{name:"code",placeholder:"كود الكيو ار",type:"text"}],buttons:[{text:"الغاء",role:"cancel",cssClass:"secondary"},{text:"تأكيد",handler:async e=>{const t=await g.G0.create({message:"استنى نفعل الكود"});await t.present();const o=y().create({headers:{Authentication:"Bearer "+(0,D.a)().token}});o.get("https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/courseCode?courseId="+this.$route.query.id+"&code="+e.code,{crossdomain:!0}).then((e=>{200==e.data.code?this.getData():g.Cl.create({header:"مشكلة !",message:"الكود مش مظبوط",buttons:["تمام"],mode:"ios"}).then((e=>{e.present(),e.onDidDismiss().then((()=>{this.useQR()}))})),t.dismiss()})).catch((e=>{console.error(e),g.Cl.create({header:"مشكلة !",message:"الكود مش صح",buttons:["تمام"],mode:"ios"}).then((e=>{e.present(),e.onDidDismiss().then((()=>{this.useQR()}))})),t.dismiss()}))}}],mode:"ios"});await e.present();const{role:t}=await e.onDidDismiss();console.log("onDidDismiss resolved with role",t)},getVideoSections(e){let t=e,o=[];return this.sortWords.forEach(((e,n)=>{const s=t.filter((e=>this.sortWords.findIndex((t=>t===e.title.split(" ").find((e=>this.sortWords.includes(e)))))===n));s.length&&(o.push({title:e,data:s}),t=t.filter((e=>this.sortWords.findIndex((t=>t===e.title.split(" ").find((e=>this.sortWords.includes(e)))))!==n)))})),t.length&&o.push({title:"أخرى",data:t}),o},sortVideos(e,t){return this.sortWords.findIndex((t=>e.title.includes(t)))-this.sortWords.findIndex((e=>t.title.includes(e)))},async presentActionSheet(e){const t=await g.BO.create({subHeader:"اختار طريقة المشاهدة",header:e.title,buttons:[{text:"هنا جوا الأبلكيشن",icon:k.niN,handler:()=>{this.openVideo(e)}},{text:"على أبلكيشن يوتيوب",icon:k.Iir,handler:()=>{window.open("https://youtu.be/"+e.videoID,"_system")}}]});await t.present()},getVideoID(e){const t=_().AES.decrypt(e,_().enc.Utf8.parse("aplusencurlsaify"),{mode:_().mode.CBC,iv:_().enc.Utf8.parse("apluscode.comivs"),padding:_().pad.Pkcs7}).toString(_().enc.Utf8);return t.substring(t.lastIndexOf("/")+1)},async openVideo(e){const t=await g.Fy.create({component:b.Z,componentProps:e,cssClass:"video-modal",backdropDismiss:!1,showBackdrop:!0});return t.present()},segmentChanged(e){this.segment=e.detail.value},getData(){this.error=!1,this.loading=!0,y().get("https://elsaify-proxy.ignitionsoftware.workers.dev/?https://elsaify.elameed.education/elsefy/api/desktop/getCourseFiles?cId="+this.$route.query.id+"&package=0&type=0&sub=0",{crossdomain:!0}).then((e=>{200==e.data.code?this.data=e.data.data:this.error=!0,this.loading=!1})).catch((e=>{console.error(e),this.error=!0,this.loading=!1}))}},computed:{homeworks(){return this.data.filter((e=>!["امتحان","الامتحان","أمتحان","الأمتحان","اختبار","الاختبار"].some((t=>e.title.includes(t)))))},exams(){return this.data.filter((e=>["امتحان","الامتحان","أمتحان","الأمتحان","اختبار","الاختبار"].some((t=>e.title.includes(t)))))}}},v=o(3744);const x=(0,v.Z)(C,[["render",f],["__scopeId","data-v-49d37710"]]);var U=x}}]);
//# sourceMappingURL=213.66553d8c.js.map